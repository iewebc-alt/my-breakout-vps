#!/bin/bash

# Путь к вашей папке проекта
TARGET_DIR="/var/www/breakout_dev"

# 1. Проверка: находимся ли мы в нужной папке
if [ "$PWD" != "$TARGET_DIR" ]; then
    echo "Ошибка: Команда 'g' работает только внутри $TARGET_DIR"
    exit 1
fi

# 2. Запрос комментария с поддержкой полноценного редактирования (-e)
# Флаг -e подключает библиотеку readline (стрелочки, удаление и т.д.)
read -e -p "Введите комментарий к коммиту: " msg

# Если комментарий пустой, выходим
if [ -z "$msg" ]; then
    echo "Отмена: Пустой комментарий."
    exit 1
fi

# 3. Выполнение команд Git
git add .
git commit -m "$msg"
git push

echo "Готово! Изменения отправлены."
